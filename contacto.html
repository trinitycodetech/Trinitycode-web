<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Contacto ‚Äî Trinity Code</title>
  <link rel="icon" href="assets/favicon.ico">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <!-- NAV -->
  <nav class="navbar navbar-expand-lg sticky-top" data-bs-theme="dark" style="background:rgba(10,14,15,.7)">
    <div class="container">
      <a class="navbar-brand fw-bold d-flex align-items-center gap-2" href="index.html">
        <img src="assets/icono.png" alt="Trinity Code" height="32" class="me-2">
        <span>Trinity <span class="brand-gradient">Code</span></span>
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div id="nav" class="collapse navbar-collapse">
        <ul class="navbar-nav ms-auto mb-2 mb-lg-0 align-items-lg-center">
          <li class="nav-item"><a class="nav-link" href="index.html">Inicio</a></li>
          <li class="nav-item"><a class="nav-link" href="aidapp.html">AidApp</a></li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown">Servicios</a>
            <ul class="dropdown-menu dropdown-menu-end">
              <li><a class="dropdown-item" href="servicios/integraciones.html">Integraciones & APIs</a></li>
              <li><a class="dropdown-item" href="servicios/datos.html">Datos (Power BI & SQL)</a></li>
              <li><a class="dropdown-item" href="servicios/web.html">Web & Paneles</a></li>
            </ul>
          </li>
          <li class="nav-item"><a class="nav-link" href="faq.html">Preguntas</a></li>
          <li class="nav-item"><a class="nav-link active" aria-current="page" href="contacto.html">Contacto</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- HEADER -->
  <header class="hero py-5">
    <div class="container">
      <h1 class="display-6 fw-bold">Contacto</h1>
      <p class="text-muted">Cu√©ntanos qu√© necesitas y coordinamos una demo.</p>
    </div>
  </header>

  <!-- CONTACTO -->
  <section class="py-5">
    <div class="container">
      <div class="row g-4">
        <div class="col-lg-5">
          <div class="card p-4 h-100">
            <div class="d-grid gap-2">
              <a class="btn btn-brand" href="mailto:trinitycode.tech@gmail.com?subject=Contacto%20TrinityCode">üìß contacto@trinitycode.cl</a>
              <a class="btn btn-brand" target="_blank" rel="noopener" href="https://wa.me/56900000000?text=Hola%20TrinityCode%2C%20quiero%20saber%20sobre%20AidApp">üí¨ WhatsApp</a>
              <a class="btn btn-outline-brand" href="aidapp.html#obtener">‚¨áÔ∏è Obtener AidApp</a>
            </div>
          </div>
        </div>

        <div class="col-lg-7">
          <form id="contactForm" class="card p-4 h-100">
            <h2 class="h5 mb-3">Escr√≠benos</h2>
            <div class="row g-3">
              <div class="col-md-6">
                <div class="form-floating">
                  <input required type="text" class="form-control" id="nombre" placeholder="Tu nombre">
                  <label for="nombre">Nombre</label>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-floating">
                  <input required type="email" class="form-control" id="email" placeholder="tucorreo@dominio.com">
                  <label for="email">Email</label>
                </div>
              </div>
              <div class="col-12">
                <div class="form-floating">
                  <textarea required class="form-control" id="mensaje" placeholder="Cu√©ntanos de tu caso" style="height:140px"></textarea>
                  <label for="mensaje">Mensaje</label>
                </div>
              </div>
              <div class="col-12 d-flex align-items-center gap-3">
                <button id="submitBtn" class="btn btn-brand btn-lg" type="submit">Enviar</button>
                <small class="text-muted">Al enviar aceptas contacto por email/WhatsApp.</small>
              </div>
            </div>
          </form>
        </div>

      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="py-4">
    <div class="container d-flex flex-column flex-md-row justify-content-between align-items-center gap-2">
      <div>¬© <span id="year"></span> TrinityCode ‚Äî Santiago, Chile</div>
      <div class="text-muted"><a href="assets/politica-privacidad.pdf" target="_blank" rel="noopener">Pol√≠tica de Privacidad</a></div>
    </div>
  </footer>

  <!-- JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Firebase + Firestore (CDN, m√≥dulo) -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-app.js";
    import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-firestore.js";
    // (Opcional) Analytics:
    // import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-analytics.js";

    // Config de tu app (usa la de tu consola ‚Äî corregido storageBucket)
    const firebaseConfig = {
      apiKey: "AIzaSyDF_yi7cP9U20BE7unAwexlFCtE8qST4Y",
      authDomain: "trinitycode.firebaseapp.com",
      projectId: "trinitycode",
      storageBucket: "trinity-code.appspot.com",
      messagingSenderId: "925562844874",
      appId: "1:925562844874:web:7e84bacce709acd44f6e33",
      measurementId: "G-7LYEERGSK4"
    };

    // Inicializar
    const app = initializeApp(firebaseConfig);
    const db  = getFirestore(app);
    // const analytics = getAnalytics(app); // si activaste Analytics

    // Env√≠o del formulario a Firestore
    const form = document.getElementById('contactForm');
    const btn  = document.getElementById('submitBtn');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const nombre  = document.getElementById('nombre').value.trim();
      const email   = document.getElementById('email').value.trim();
      const mensaje = document.getElementById('mensaje').value.trim();
      if(!nombre || !email || !mensaje){ alert('Completa todos los campos'); return; }

      const old = btn.innerHTML; btn.disabled = true; btn.innerHTML = 'Enviando...';
      try{
        await addDoc(collection(db, 'contactMessages'), {
          nombre, email, mensaje,
          createdAt: serverTimestamp(),
          userAgent: navigator.userAgent || ''
        });
        form.reset();
        alert('‚úÖ Mensaje enviado. ¬°Gracias!');
      }catch(err){
        console.error(err);
        alert('‚ùå Ocurri√≥ un error al enviar. Intenta nuevamente.');
      }finally{
        btn.disabled = false; btn.innerHTML = old;
      }
    });
  </script>

  <script>document.getElementById('year').textContent=new Date().getFullYear();</script>
</body>
</html>
